/*! angularjs-slider - v1.1.0 - (c) Rafal Zajac <rzajac@gmail.com>, Valentin Hervieu <valentin@hervieu.me>, Jussi Saarivirta <jusasi@gmail.com>, Angelin Sirbu <angelin.sirbu@gmail.com>, https://github.com/rzajac/angularjs-slider.git - 2015-11-07 */
!function(i,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(i.angular)}(this,function(i){"use strict";var t=i.module("rzModule",[]).value("throttle",function(i,t,s){var e,h,a,r=Date.now||function(){return(new Date).getTime()},l=null,n=0;s=s||{};var d=function(){n=s.leading===!1?0:r(),l=null,a=i.apply(e,h),e=h=null};return function(){var o=r();n||s.leading!==!1||(n=o);var c=t-(o-n);return e=this,h=arguments,0>=c?(clearTimeout(l),l=null,n=o,a=i.apply(e,h),e=h=null):l||s.trailing===!1||(l=setTimeout(d,c)),a}}).factory("RzSlider",function(t,s,e,h){var a=function(i,t,s){this.scope=i,this.attributes=s,this.sliderElem=t,this.range=void 0!==s.rzSliderHigh&&void 0!==s.rzSliderModel,this.dragRange=this.range&&"true"===s.rzSliderDraggableRange,this.dragBubble="true"===s.rzSliderBubbleDraggable,this.dragging={active:!1,value:0,difference:0,offset:0,lowDist:0,highDist:0},this.handleHalfWidth=0,this.alwaysShowBar=!!s.rzSliderAlwaysShowBar,this.maxLeft=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.hideLimitLabels=!!s.rzSliderHideLimitLabels,this.presentOnly="true"===s.rzSliderPresentOnly,this.showTicks=s.rzSliderShowTicks||s.rzSliderShowTicksValue,this.showTicksValue=s.rzSliderShowTicksValue,this.disabled=this.scope.rzSliderDisabled,this.interval=null!==this.scope.rzSliderInterval?this.scope.rzSliderInterval:350,this.valueRange=0,this.initHasRun=!1,this.customTrFn=this.scope.rzSliderTranslate()||function(i){return String(i)},this.deRegFuncs=[],this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()};return a.prototype={init:function(){var s,a,r,l=i.bind(this,this.calcViewDimensions),n=this;this.initElemHandles(),this.addAccessibility(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,t(function(){n.updateCeilLab(),n.updateFloorLab(),n.initHandles(),n.bindEvents()}),r=this.scope.$on("reCalcViewDimensions",l),this.deRegFuncs.push(r),i.element(e).on("resize",l),this.initHasRun=!0,s=h(function(){n.setMinAndMax(),n.updateLowHandle(n.valueToOffset(n.scope.rzSliderModel)),n.updateSelectionBar(),n.updateTicksScale(),n.range&&n.updateCmbLabel()},n.interval),a=h(function(){n.setMinAndMax(),n.updateHighHandle(n.valueToOffset(n.scope.rzSliderHigh)),n.updateSelectionBar(),n.updateTicksScale(),n.updateCmbLabel()},n.interval),this.scope.$on("rzSliderForceRender",function(){n.resetLabelsValue(),s(),n.range&&a(),n.resetSlider()}),r=this.scope.$watch("rzSliderModel",function(i,t){i!==t&&s()}),this.deRegFuncs.push(r),r=this.scope.$watch("rzSliderHigh",function(i,t){i!==t&&a()}),this.deRegFuncs.push(r),this.scope.$watch("rzSliderFloor",function(i,t){i!==t&&n.resetSlider()}),this.deRegFuncs.push(r),r=this.scope.$watch("rzSliderCeil",function(i,t){i!==t&&n.resetSlider()}),this.deRegFuncs.push(r),r=this.scope.$watch("rzSliderShowTicks",function(i,t){i!==t&&n.resetSlider()}),this.deRegFuncs.push(r),r=this.scope.$watch("rzSliderShowTicksValue",function(i,t){i!==t&&n.resetSlider()}),this.deRegFuncs.push(r),r=this.scope.$watch("rzSliderDisabled",function(i,t){i!==t&&(n.resetSlider(),n.disabled?n.unbindEvents():n.bindEvents())}),this.deRegFuncs.push(r),this.scope.$on("$destroy",function(){n.unbindEvents(),i.element(e).off("resize",l),n.deRegFuncs.map(function(i){i()})})},resetSlider:function(){this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.setDisabledState(),this.calcViewDimensions()},setDisabledState:function(){this.disabled=this.scope.rzSliderDisabled,this.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(i,t,s){s=void 0===s?!0:s;var e=(s?this.customTrFn(i):i).toString(),h=!1;(void 0===t.rzsv||t.rzsv.length!==e.length||t.rzsv.length>0&&0===t.rzsw)&&(h=!0,t.rzsv=e),t.text(e),h&&this.getWidth(t)},setMinAndMax:function(){this.minValue=this.scope.rzSliderFloor?+this.scope.rzSliderFloor:this.scope.rzSliderFloor=0,this.maxValue=this.scope.rzSliderCeil?+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep),this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){i.forEach(this.sliderElem.children(),function(t,s){var e=i.element(t);switch(s){case 0:this.fullBar=e;break;case 1:this.selBar=e;break;case 2:this.minH=e;break;case 3:this.maxH=e;break;case 4:this.flrLab=e;break;case 5:this.ceilLab=e;break;case 6:this.minLab=e;break;case 7:this.maxLab=e;break;case 8:this.cmbLab=e;break;case 9:this.ticks=e}},this),this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab)),this.showTicksValue&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.minLab.rzAlwaysHide=!0,this.maxLab.rzAlwaysHide=!0,this.cmbLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.hideEl(this.cmbLab)),this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH)),this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove()),this.dragRange&&(this.selBar.css("cursor","move"),this.selBar.addClass("rz-draggable")),this.dragBubble&&(this.minLab[0].style.cursor="pointer")},addAccessibility:function(){this.sliderElem.attr("role","slider")},calcViewDimensions:function(){var i=this.getWidth(this.minH);this.handleHalfWidth=i/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-i,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles())},updateTicksScale:function(){if(this.showTicks&&this.step){for(var i="",t=Math.round((this.maxValue-this.minValue)/this.step)+1,s=0;t>s;s++){var e=this.roundStep(this.minValue+s*this.step),h=this.isTickSelected(e)?"selected":"";i+='<li class="tick '+h+'">',this.showTicksValue&&(i+='<span class="tick-value">'+this.getDisplayValue(e)+"</span>"),i+="</li>"}this.ticks.html(i)}},isTickSelected:function(i){this.valueToOffset(i);return!this.range&&this.alwaysShowBar&&i<=this.scope.rzSliderModel?!0:this.range&&i>=this.scope.rzSliderModel&&i<=this.scope.rzSliderHigh?!0:!1},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},callOnStart:function(){if(this.scope.rzSliderOnStart){var i=this;t(function(){i.scope.rzSliderOnStart()})}},callOnChange:function(){if(this.scope.rzSliderOnChange){var i=this;t(function(){i.scope.rzSliderOnChange()})}},callOnEnd:function(){if(this.scope.rzSliderOnEnd){var i=this;t(function(){i.scope.rzSliderOnEnd()})}},updateHandles:function(i,t){return"rzSliderModel"===i?(this.updateLowHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void(this.range&&this.updateCmbLabel())):"rzSliderHigh"===i?(this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void(this.range&&this.updateCmbLabel())):(this.updateLowHandle(t),this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),void this.updateCmbLabel())},updateLowHandle:function(i){this.setLeft(this.minH,i),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,i-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},updateHighHandle:function(i){this.setLeft(this.maxH,i),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,i-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var i=!1,t=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(i=!0,this.hideEl(this.flrLab)):(i=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):i||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)+this.handleHalfWidth),this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateCmbLabel:function(){var i,t;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(i=this.getDisplayValue(this.scope.rzSliderModel),t=this.getDisplayValue(this.scope.rzSliderHigh),this.translateFn(i+" - "+t,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},getDisplayValue:function(i){return this.customTrFn?this.customTrFn(i):i},roundStep:function(i){var t=this.step,s=+((i-this.minValue)%t).toFixed(3),e=s>t/2?i+t-s:i-s;return e=e.toFixed(this.precision),+e},hideEl:function(i){return i.css({opacity:0})},showEl:function(i){return i.rzAlwaysHide?i:i.css({opacity:1})},setLeft:function(i,t){return i.rzsl=t,i.css({left:t+"px"}),t},getWidth:function(i){var t=i[0].getBoundingClientRect();return i.rzsw=t.right-t.left,i.rzsw},setWidth:function(i,t){return i.rzsw=t,i.css({width:t+"px"}),t},valueToOffset:function(i){return(i-this.minValue)*this.maxLeft/this.valueRange||0},offsetToValue:function(i){return i/this.maxLeft*this.valueRange+this.minValue},getEventX:function(i){return"clientX"in i?i.clientX:void 0===i.originalEvent?i.touches[0].clientX:i.originalEvent.touches[0].clientX},getNearestHandle:function(i){if(!this.range)return this.minH;var t=this.getEventX(i)-this.sliderElem.rzsl-this.handleHalfWidth;return Math.abs(t-this.minH.rzsl)<Math.abs(t-this.maxH.rzsl)?this.minH:this.maxH},bindEvents:function(){if(!this.presentOnly&&!this.disabled){var t,s,e;this.dragRange?(t="rzSliderDrag",s=this.onDragStart,e=this.onDragMove):(t="rzSliderModel",s=this.onStart,e=this.onMove),this.minH.on("mousedown",i.bind(this,this.onStart,this.minH,"rzSliderModel")),this.dragBubble&&this.minLab.on("mousedown",i.bind(this,this.onStart,this.minLab,"rzSliderModel")),this.range&&this.maxH.on("mousedown",i.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("mousedown",i.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",i.bind(this,this.onMove,this.fullBar)),this.selBar.on("mousedown",i.bind(this,s,null,t)),this.selBar.on("mousedown",i.bind(this,e,this.selBar)),this.ticks.on("mousedown",i.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",i.bind(this,this.onMove,this.ticks)),this.minH.on("touchstart",i.bind(this,this.onStart,this.minH,"rzSliderModel")),this.dragBubble&&this.minLab.on("touchstart",i.bind(this,this.onStart,this.minLab,"rzSliderModel")),this.range&&this.maxH.on("touchstart",i.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("touchstart",i.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",i.bind(this,this.onMove,this.fullBar)),this.selBar.on("touchstart",i.bind(this,s,null,t)),this.selBar.on("touchstart",i.bind(this,e,this.selBar)),this.ticks.on("touchstart",i.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",i.bind(this,this.onMove,this.ticks))}},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(t,e,h){var a,r,l=this.getEventNames(h);h.stopPropagation(),h.preventDefault(),""===this.tracking&&(this.calcViewDimensions(),t?this.tracking=e:(t=this.getNearestHandle(h),this.tracking=t===this.minH?"rzSliderModel":"rzSliderHigh"),t.addClass("rz-active"),a=i.bind(this,this.dragging.active?this.onDragMove:this.onMove,t),r=i.bind(this,this.onEnd,a),s.on(l.moveEvent,a),s.one(l.endEvent,r),this.callOnStart())},onMove:function(i,t){var s,e,h,a=this.getEventX(t);if(s=this.sliderElem.rzsl,e=a-s-this.handleHalfWidth,0>=e){if(0===i.rzsl)return;h=this.minValue,e=0}else if(e>=this.maxLeft){if(i.rzsl===this.maxLeft)return;h=this.maxValue,e=this.maxLeft}else h=this.offsetToValue(e),h=this.roundStep(h),e=this.valueToOffset(h);this.positionTrackingHandle(h,e)},onDragStart:function(i,t,s){var e=this.getEventX(s)-this.sliderElem.rzsl-this.handleHalfWidth;this.dragging={active:!0,value:this.offsetToValue(e),difference:this.scope.rzSliderHigh-this.scope.rzSliderModel,offset:e,lowDist:e-this.minH.rzsl,highDist:this.maxH.rzsl-e},this.minH.addClass("rz-active"),this.maxH.addClass("rz-active"),this.onStart(i,t,s)},onDragMove:function(i,t){var s,e,h,a,r=this.getEventX(t)-this.sliderElem.rzsl-this.handleHalfWidth;if(r<=this.dragging.lowDist){if(i.rzsl===this.dragging.lowDist)return;h=this.minValue,s=0,a=this.dragging.difference,e=this.valueToOffset(a)}else if(r>=this.maxLeft-this.dragging.highDist){if(i.rzsl===this.dragging.highDist)return;a=this.maxValue,e=this.maxLeft,h=this.maxValue-this.dragging.difference,s=this.valueToOffset(h)}else h=this.offsetToValue(r-this.dragging.lowDist),h=this.roundStep(h),s=this.valueToOffset(h),a=h+this.dragging.difference,e=this.valueToOffset(a);this.positionTrackingBar(h,a,s,e)},positionTrackingBar:function(i,t,s,e){this.scope.rzSliderModel=i,this.scope.rzSliderHigh=t,this.updateHandles("rzSliderModel",s),this.updateHandles("rzSliderHigh",e),this.scope.$apply(),this.callOnChange()},positionTrackingHandle:function(i,t){this.range&&("rzSliderModel"===this.tracking&&i>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.scope.$apply(),this.callOnChange()):"rzSliderHigh"===this.tracking&&i<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.scope.$apply(),this.callOnChange())),this.scope[this.tracking]!==i&&(this.scope[this.tracking]=i,this.updateHandles(this.tracking,t),this.scope.$apply(),this.callOnChange())},onEnd:function(i,t){var e=this.getEventNames(t).moveEvent;this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),s.off(e,i),this.scope.$emit("slideEnded"),this.tracking="",this.dragging.active=!1,this.callOnEnd()},getEventNames:function(i){var t={moveEvent:"",endEvent:""};return i.touches||void 0!==i.originalEvent&&i.originalEvent.touches?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t}},a}).directive("rzslider",function(i){return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderDraggable:"@",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@",rzSliderOnStart:"&",rzSliderOnChange:"&",rzSliderOnEnd:"&",rzSliderShowTicks:"=?",rzSliderShowTicksValue:"=?",rzSliderDisabled:"=?",rzSliderInterval:"=?",rzSliderBubbleDraggable:"=?"},templateUrl:function(i,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(t,s,e){return new i(t,s,e)}}});return t});
